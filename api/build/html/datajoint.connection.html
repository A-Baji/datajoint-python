<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>datajoint.connection module &mdash; Datajoint Python 0.3 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Datajoint Python 0.3 documentation" href="index.html" />
    <link rel="next" title="datajoint.declare module" href="datajoint.declare.html" />
    <link rel="prev" title="datajoint.blob module" href="datajoint.blob.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-datajoint.connection">
<span id="datajoint-connection-module"></span><h1>datajoint.connection module<a class="headerlink" href="#module-datajoint.connection" title="Permalink to this headline">¶</a></h1>
<dl class="docutils">
<dt>This module hosts the Connection class that manages the connection to the mysql database,</dt>
<dd>and the <cite>conn</cite> function that provides access to a persistent connection in datajoint.</dd>
</dl>
<dl class="class">
<dt id="datajoint.connection.Connection">
<em class="property">class </em><code class="descclassname">datajoint.connection.</code><code class="descname">Connection</code><span class="sig-paren">(</span><em>host</em>, <em>user</em>, <em>passwd</em>, <em>init_fun=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/datajoint/connection.html#Connection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#datajoint.connection.Connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>A dj.Connection object manages a connection to a database server.
It also catalogues modules, schemas, tables, and their dependencies (foreign keys).</p>
<p>Most of the parameters below should be set in the local configuration file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>host</strong> &#8211; host name</li>
<li><strong>user</strong> &#8211; user name</li>
<li><strong>passwd</strong> &#8211; password</li>
<li><strong>init_fun</strong> &#8211; initialization function</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="datajoint.connection.Connection.cancel_transaction">
<code class="descname">cancel_transaction</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/datajoint/connection.html#Connection.cancel_transaction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#datajoint.connection.Connection.cancel_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Cancels the current transaction and rolls back all changes made during the transaction.</p>
</dd></dl>

<dl class="method">
<dt id="datajoint.connection.Connection.commit_transaction">
<code class="descname">commit_transaction</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/datajoint/connection.html#Connection.commit_transaction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#datajoint.connection.Connection.commit_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit all changes made during the transaction and close it.</p>
</dd></dl>

<dl class="method">
<dt id="datajoint.connection.Connection.connect">
<code class="descname">connect</code><span class="sig-paren">(</span><em>init_fun=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/datajoint/connection.html#Connection.connect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#datajoint.connection.Connection.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Connects to the database server.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>init_fun</strong> &#8211; initialization function passed to pymysql</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="datajoint.connection.Connection.in_transaction">
<code class="descname">in_transaction</code><a class="headerlink" href="#datajoint.connection.Connection.in_transaction" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">True if there is an open transaction.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="datajoint.connection.Connection.is_connected">
<code class="descname">is_connected</code><a class="headerlink" href="#datajoint.connection.Connection.is_connected" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns true if the object is connected to the database server.</p>
</dd></dl>

<dl class="method">
<dt id="datajoint.connection.Connection.query">
<code class="descname">query</code><span class="sig-paren">(</span><em>query</em>, <em>args=()</em>, <em>as_dict=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/datajoint/connection.html#Connection.query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#datajoint.connection.Connection.query" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the specified query and return the tuple generator (cursor).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>query</strong> &#8211; mysql query</li>
<li><strong>args</strong> &#8211; additional arguments for the client.cursor</li>
<li><strong>as_dict</strong> &#8211; If as_dict is set to True, the returned cursor objects returns
query results as dictionary.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="datajoint.connection.Connection.register">
<code class="descname">register</code><span class="sig-paren">(</span><em>schema</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/datajoint/connection.html#Connection.register"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#datajoint.connection.Connection.register" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="datajoint.connection.Connection.start_transaction">
<code class="descname">start_transaction</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/datajoint/connection.html#Connection.start_transaction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#datajoint.connection.Connection.start_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts a transaction error.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><strong>DataJointError</strong> &#8211; if there is an ongoing transaction.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="datajoint.connection.Connection.transaction">
<code class="descname">transaction</code><a class="headerlink" href="#datajoint.connection.Connection.transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Context manager for transactions. Opens an transaction and closes it after the with statement.
If an error is caught during the transaction, the commits are automatically rolled back.
All errors are raised again.</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">datajoint</span> <span class="k">as</span> <span class="nn">dj</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">dj</span><span class="o">.</span><span class="n">conn</span><span class="p">()</span><span class="o">.</span><span class="n">transaction</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="c1"># transaction is open here</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="datajoint.connection.conn">
<code class="descclassname">datajoint.connection.</code><code class="descname">conn</code><span class="sig-paren">(</span><em>host=None</em>, <em>user=None</em>, <em>passwd=None</em>, <em>init_fun=None</em>, <em>reset=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/datajoint/connection.html#conn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#datajoint.connection.conn" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a persistent connection object to be shared by multiple modules.
If the connection is not yet established or reset=True, a new connection is set up.
If connection information is not provided, it is taken from config which takes the
information from dj_local_conf.json. If the password is not specified in that file
datajoint prompts for the password.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>host</strong> &#8211; hostname</li>
<li><strong>user</strong> &#8211; mysql user</li>
<li><strong>passwd</strong> &#8211; mysql password</li>
<li><strong>init_fun</strong> &#8211; initialization function</li>
<li><strong>reset</strong> &#8211; whether the connection should be reseted or not</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="datajoint.blob.html" title="previous chapter">datajoint.blob module</a></li>
      <li>Next: <a href="datajoint.declare.html" title="next chapter">datajoint.declare module</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/datajoint.connection.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Dimitri Yatsenko, Edgar Walker, Fabian Sinz.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="_sources/datajoint.connection.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>